<?phpif(!defined('IN_DISCUZ')) {	exit('Access Denied');}function upBuyState($number){	global $_G;	if(empty($_G['cache']['plugin'])){		loadcache('plugin');	}	$config = $_G['cache']['plugin']['ck8_view'];	if(!empty($number)){		$log_id = explode("-",$number);		$log_list = C::t('#ck8_view#ck8_view_buy_log')->get_view_buy_log_first(array('log_id'=> $log_id[1]));		if(!empty($config['author_earnings']) && $log_list['log_pay_state'] == 1){		    updatemembercount($log_list['log_authorid'], array('extcredits'.$config['credits_type'] => $log_list['log_authorid_reap']), true, '',1,1,lang('plugin/ck8_view','langview016'),lang('plugin/ck8_view','langview017'));		}		C::t('#ck8_view#ck8_view_buy_log')->update(array('log_pay_state'=> 2, 'log_pay_date' => TIMESTAMP),array('log_id'=> $log_id[1]));		return true;    }else{		return false;	}}function ck8_select($name, $data, $selected, $initial) {    $select = "<select name='$name' id='$name'>";    if ($initial) {        $select.= "<option value='".$initial[0]."'>".$initial[1]."</option>";    }    foreach ($data as $v) {        $sed = $selected == $v[0] ? 'selected' : '';        $select.= "<option value='".$v[0]."' $sed>".$v[1]."</option>";    }    $select.= "</select>";    return $select;}function viewget_randChar($length){   $str = null;   $strPol = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";   $max = strlen($strPol)-1;   for($i=0;$i<$length;$i++){    $str.=$strPol[rand(0,$max)];   }  return $str;}?>